---
title: Webhook notifications
---

## Format

Mangopay provides a webhook feature to submit notifications to other applications whenever a specific event occurs.

The notification is a GET HTTP call with query parameters in the format:

> https<span>://www</span>.example.com?EventType=`EventType`&RessourceId=`ResourceId`&Date=`Date`

Mangopay webhooks rely on the [Hook](/api-reference/webhooks/hook-object) object of the API. The available `EventType` values are listed in the [event types list](/webhooks/event-types). 

The `RessourceId` is the unique identifier of the corresponding resource for the event. For example, for the `PAYIN_NORMAL_SUCCEEDED` `EventType` the `RessourceId` is the `Id` of the specific pay-in (the `PayInId`).

The `Date` is given as a Unix timestamp.

## Set up a webhook

To set up a webhook, you can use the API or the <a href="https://hub.mangopay.com/" target="_blank">Mangopay Dashboard</a> (***Developers*** > ***Webhooks***).

<Steps>
<Step title="Define the URL to which you wish to receive the notification">

Your page must respond with a HTTP 200 response within 2 seconds for Mangopay to consider the notification valid.

Ensure you allow the [IP addresses listed below](#ip-addresses) from which Mangopay sends hook notifications. 
<Note>
**Note – Use a TLS 1.2 certificate**

Your endpoint must be protected using a TLS 1.2 certificate. Endpoints using self-signed certificates, SSL certificates or TLS versions 1.0 and 1.1 may be rejected by our webhook systems.
</Note>
</Step>
<Step title="Create the Hook for the event type">
If using the Dashboard, select the event type and enter your URL.

If using the API, call the [POST Create a Hook](/api-reference/webhooks/create-hook) endpoint, specifying your `Url`.

You can also specify and optional `Tag`.

In response, the API returns the Hook object and its `HookId`.

```json API response example
{
    "Url": "https://webhook.site/e1def644-2cee-4669-a4a6-b6ceeacc621b",
    "Status": "ENABLED",
    "Validity": "VALID",
    "EventType": "USER_ACCOUNT_ACTIVATED",
    "Id": "hook_m_01JQW43GW82MJ23HB8Y6B3JZ72",
    "Tag": "Created using the Mangopay Postman collection",
    "CreationDate": 1743626814
}
```
</Step>
<Step title="Create the resource that leads to the event">
The event type is triggered by a change of status of an API object that you created. So your integration needs to create the resource that will then change status to trigger the notification.

In the example above, for `USER_ACCOUNT_ACTIVATED`, the resource is a Natural or Legal User with the `OWNER` `UserCategory` that was created or categorized with the SCA-enabled endpoints. 

When SCA was triggered, their UserStatus changed to `PENDING_USER_ACTION`. When the user completes the SCA session, their `UserStatus` changes to `ACTIVE`, triggering the `USER_ACCOUNT_ACTIVATED` event.
</Step>
<Step title="Listen for the notification on your URL">
An example of the notification for the Hook created above would be:

> https<span>://www</span>.example.com?EventType=USER_ACCOUNT_ACTIVATED&RessourceId=user_m_01JQVHDG0S0TJP5KFX029211BF&Date=1743627006

In this example, the `RessourceId` is the `Id` of the user that completed the SCA session. 
</Step>
<Step title="Trigger a GET call on the relevant resource">
When your system receives the hook notification, you should trigger a GET call on the relevant API object, as listed in the event types list, using the `RessourceId` of the notification.

This allows you to check that the event is still relevant and ensure that the notification is authentic.

Continuing the example above, you would trigger a call to [GET View a User (SCA)](/api-reference/users/view-user-sca) with the `UserId` path parameter as `user_m_01JQVHDG0S0TJP5KFX029211BF`.

In the API response, the `UserStatus` shows as `ACTIVE`, confirming that the event is still valid. The User object also returns other relevant information needed for your integration, such as name, email (for example, to send confirmation), and other key data.
</Step>
</Steps>

## IP addresses
Mangopay sends webhook notifications from the IP addresses listed below in both the Production and Sandbox environments. Depending on your firewall or network security setup, you may need to add them to an allowlist to receive notifications.

The CIDR ranges and the full lists given below express the same IP addresses. The `/32` indicates that only there is only one IP address in the range.

<Note>
**Note – Contact Mangopay for full list**

The IPs below are redacted for security reasons. When your platform is looking to test webhooks in Sandbox, contact Mangopay <a href="https://hub.mangopay.com/" target="_blank">via the Dashboard</a> for the full list. 
</Note>

**CIDR ranges:**
- X.XX.XXX.180/32
- X.XX.XXX.181/32
- X.XX.XXX.182/32

**IP addresses:**
- X.XX.XXX.180
- X.XX.XXX.181
- X.XX.XXX.182

## Notification failure

Hook notifications can fail. This means the hooked URL did not respond with a 200 - status code within 2 seconds after the notification was sent.  

If this happens, the Mangopay API will behave as follows:  
- Every 10 failed notifications - You will receive an email warning you of the issue.  
- After 1 successful notification - The counter is reset. Please note that changing the hook’s URL will not reset the failure count.  
- After 100 consecutive failed notifications - The hook `Validity` will automatically be set to `INVALID` and its `Status` to `DISABLED`.

Once a hook becomes `INVALID` (following unsuccessful retries) the hook must be disabled and re-enabled.

## Retries of failed notifications 

Hook notifications come with a retry feature, which means that the Mangopay API will resubmit a failed notification until it reaches 100 consecutive failures.  

To make sure the notification failures don’t lead to the hook being set to `INVALID` too quickly, the retries are spaced as follows:  
- Every 10 minutes for the first hour  
- Every 8 hours once the first hour is passed, and for the next 3 days 

<CardGroup col={2}> 
    <Card title="Webhooks" href="/webhooks/event-types">Learn more about event types</Card>

    <Card title="Endpoint" href="/api-reference/webhooks/hook-object">The Hook object</Card>  
</CardGroup>